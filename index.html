<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="theme-color" content="#000000">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Windsurf Model Selector v8.0 - Kodexalabs Edition">
    <meta property="og:description" content="Smart prompt enhancement for Windsurf IDE - Analyze your task, get optimal model recommendations, and enhance your prompts with AI">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    
    <title>Windsurf Model Selector v8.0 - Kodexalabs Edition</title>
    
    <style>
        /* ========================================
           KODEXALABS ASD TOKENS v3.8.0 - MONOCHROME
           Strict Black/White Design System
        ======================================== */
        
        :root {
            /* === ASD TOKENS - MONOCHROME PALETTE === */
            --background: 0 0% 0%;           /* Pure black #000000 */
            --foreground: 0 0% 100%;         /* Pure white #ffffff */

            --card: 0 0% 7%;                 /* Surface elevated */
            --card-foreground: 0 0% 100%;
 
            --popover: 0 0% 7%;
            --popover-foreground: 0 0% 100%;
 
            --primary: 0 0% 100%;            /* White primary */
            --primary-foreground: 0 0% 0%;   /* Black text on white */
 
            --secondary: 0 0% 12%;           /* Elevated surface */
            --secondary-foreground: 0 0% 100%;
 
            --muted: 0 0% 12%;
            --muted-foreground: 0 0% 60%;    /* #999999 */
 
            --accent: 0 0% 15%;
            --accent-foreground: 0 0% 100%;
 
            --destructive: 0 0% 100%;        /* Inverted for errors */
            --destructive-foreground: 0 0% 0%;

            --border: 0 0% 23%;              /* Monochrome border */
            --input: 0 0% 15%;
            --ring: 0 0% 100%;
 
            --radius: 0.5rem;

            /* === ASD TEXT COLORS === */
            --text-primary: 0 0% 100%;       /* #ffffff */
            --text-secondary: 0 0% 80%;      /* #cccccc */
            --text-muted: 0 0% 60%;          /* #999999 */
            --text-subtle: 0 0% 40%;         /* #666666 */
            
            /* === KODEXALABS SPACING === */
            --space-1: 4px;
            --space-2: 8px;
            --space-3: 12px;
            --space-4: 16px;
            --space-5: 20px;
            --space-6: 24px;
            --space-8: 32px;
            
            /* === KODEXALABS BORDER RADIUS === */
            --radius-sm: 4px;
            --radius-md: 6px;
            --radius-lg: 8px;
            --radius-xl: 12px;
            --radius-full: 9999px;
            
            /* === TRANSITIONS === */
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-base: 200ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* ========================================
           RESET & BASE STYLES
        ======================================== */
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            font-size: 14px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        body {
            font-family: 'Power Grotesk', 'Inter', ui-sans-serif, system-ui, sans-serif;
            background: hsl(var(--background));
            color: hsl(var(--foreground));
            line-height: 1.5;
            padding: var(--space-4);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* ========================================
           KODEXALABS TYPOGRAPHY
        ======================================== */
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Power Grotesk', 'Inter', ui-sans-serif, system-ui, sans-serif;
            font-weight: 700;
            letter-spacing: -0.02em;
            color: hsl(var(--foreground));
        }
        
        h1 {
            font-size: 1.75rem;
            margin-bottom: var(--space-2);
        }
        
        h2 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: var(--space-3);
        }
        
        h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: var(--space-3);
        }
        
        p {
            color: hsl(var(--text-secondary));
            margin-bottom: var(--space-3);
            font-size: 0.95rem;
        }
        
        /* ========================================
           LAYOUT
        ======================================== */
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }
        
        .grid {
            display: grid;
            gap: var(--space-4);
        }
        
        .grid-2 {
            grid-template-columns: 1fr 320px;
            align-items: start;
        }
        
        /* ========================================
           HEADER
        ======================================== */
        
        header {
            text-align: center;
            margin-bottom: var(--space-6);
            padding: var(--space-4) 0;
        }
        
        .subtitle {
            font-size: 0.95rem;
            color: hsl(var(--text-secondary));
            margin-bottom: var(--space-3);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* ========================================
           QUICK PRESETS BAR - HORIZONTAL LAYOUT
        ======================================== */
        
        .presets-bar {
            display: flex;
            gap: var(--space-2);
            margin: var(--space-4) 0;
            padding: var(--space-3);
            background: hsl(var(--secondary));
            border: 1px solid hsl(var(--border));
            border-radius: var(--radius-md);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            border-bottom: 1px solid hsl(var(--border));
        }
        
        .presets-bar .preset-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-1);
            padding: var(--space-3) var(--space-2);
            background: hsl(var(--card));
            border: 1px solid hsl(var(--border));
            border-radius: var(--radius-md);
            color: hsl(var(--text-primary));
            cursor: pointer;
            transition: all var(--transition-fast);
            min-width: 100px;
            text-align: center;
        }
        
        .presets-bar .preset-btn:hover {
            background: hsl(var(--accent));
            border-color: hsl(var(--foreground));
            transform: translateY(-2px);
        }
        
        .presets-bar .preset-btn.active {
            background: hsl(var(--accent));
            border-color: hsl(var(--foreground));
        }
        
        .presets-bar .preset-icon {
            font-size: 1.2rem;
        }
        
        .presets-bar .preset-name {
            font-weight: 600;
            font-size: 0.85rem;
        }
        
        .presets-bar .preset-desc {
            font-size: 0.7rem;
            color: hsl(var(--text-muted));
            line-height: 1.2;
        }
        
        /* ========================================
           COMPONENTS
        ======================================== */
        
        .card {
            background: hsl(var(--card));
            border: 1px solid hsl(var(--border));
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            transition: all var(--transition-base);
        }
        
        .auto-mode-section {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: hsl(var(--secondary));
            padding: var(--space-3) var(--space-4);
            border-radius: var(--radius-md);
            border: 1px solid hsl(var(--border));
            margin-bottom: var(--space-4);
        }
        
        .auto-mode-title {
            font-weight: 600;
            color: hsl(var(--foreground));
            font-size: 0.95rem;
            margin-bottom: 2px;
        }
        
        .auto-mode-desc {
            font-size: 0.8rem;
            color: hsl(var(--text-secondary));
        }
        
        /* ========================================
           TOGGLE SWITCH - MONOCHROME
        ======================================== */
        
        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: hsl(var(--muted));
            transition: .4s;
            border-radius: 24px;
            border: 1px solid hsl(var(--border));
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 2px;
            bottom: 2px;
            background-color: hsl(var(--text-muted));
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: hsl(var(--muted));
            border-color: hsl(var(--foreground));
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(20px);
            background-color: hsl(var(--foreground));
        }
        
                
        /* ========================================
           INPUT & BUTTONS - MONOCHROME
        ======================================== */
        
        .input-section {
            margin-bottom: var(--space-4);
        }
        
        .input-label {
            display: block;
            font-weight: 500;
            color: hsl(var(--foreground));
            margin-bottom: var(--space-2);
            font-size: 0.9rem;
        }
        
        textarea {
            width: 100%;
            min-height: 120px;
            padding: var(--space-3);
            background: hsl(var(--input));
            border: 1px solid hsl(var(--border));
            border-radius: var(--radius-md);
            color: hsl(var(--foreground));
            font-family: inherit;
            font-size: 0.95rem;
            resize: vertical;
            transition: border-color var(--transition-fast);
        }
        
        textarea:focus {
            outline: none;
            border-color: hsl(var(--ring));
            box-shadow: 0 0 0 1px hsl(var(--ring));
        }
        
        .input-hint {
            font-size: 0.8rem;
            color: hsl(var(--text-muted));
            margin-top: var(--space-2);
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            padding: var(--space-3) var(--space-4);
            border-radius: var(--radius-md);
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all var(--transition-base);
            border: 1px solid transparent;
            line-height: 1;
        }
        
        .btn-full {
            width: 100%;
        }
        
        .btn-primary {
            background: hsl(var(--foreground));
            color: hsl(var(--background));
            border: 1px solid hsl(var(--foreground));
        }
        
        .btn-primary:hover {
            background: hsl(var(--card));
            color: hsl(var(--foreground));
            transform: translateY(-1px);
        }
        
        .btn-secondary {
            background: hsl(var(--secondary));
            color: hsl(var(--foreground));
            border-color: hsl(var(--border));
        }
        
        .btn-secondary:hover {
            background: hsl(var(--accent));
            border-color: hsl(var(--foreground));
        }
        
        /* ========================================
           SIDEBAR RECOMMENDATIONS - MONOCHROME
        ======================================== */
        
        .recommendations-sidebar {
            background: hsl(var(--secondary));
            border-radius: var(--radius-lg);
            border: 1px solid hsl(var(--border));
            padding: var(--space-4);
            height: fit-content;
            position: sticky;
            top: var(--space-4);
        }
        
        .sidebar-title {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: hsl(var(--text-muted));
            margin-bottom: var(--space-3);
            padding-bottom: var(--space-2);
            border-bottom: 1px solid hsl(var(--border));
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }
        
        #compact-cards {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }
        
        .compact-card {
            background: hsl(var(--card));
            border: 1px solid hsl(var(--border));
            border-radius: var(--radius-md);
            padding: var(--space-3);
            transition: all var(--transition-fast);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .compact-card:hover {
            border-color: hsl(var(--foreground));
            background: hsl(var(--accent));
            transform: translateX(2px);
        }
        
        .compact-header {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            margin-bottom: var(--space-2);
        }
        
        .compact-rank {
            font-size: 1rem;
            font-weight: 800;
            color: hsl(var(--text-muted));
            background: hsl(var(--secondary));
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-md);
        }
        
        .compact-name {
            font-weight: 600;
            color: hsl(var(--foreground));
            font-size: 0.9rem;
        }
        
        .compact-category {
            font-size: 0.75rem;
            color: hsl(var(--text-muted));
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: var(--space-2);
        }
        
        .compact-specs {
            display: flex;
            flex-direction: column;
            gap: var(--space-1);
        }
        
        .compact-spec {
            font-size: 0.8rem;
            color: hsl(var(--text-secondary));
            display: flex;
            align-items: center;
            gap: var(--space-1);
        }
        
        .compact-spec strong {
            color: hsl(var(--foreground));
        }
        
        /* ========================================
           MODEL CATEGORIES - MONOCHROME INDICATORS
        ======================================== */
        
        .category-indicator {
            display: inline-block;
            padding: 2px 6px;
            border-radius: var(--radius-sm);
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .category-workhorse {
            background: hsl(var(--card));
            color: hsl(var(--foreground));
            border: 1px solid hsl(var(--foreground));
        }
        
        .category-premium {
            background: hsl(var(--card));
            color: hsl(var(--foreground));
            border: 2px solid hsl(var(--foreground));
        }
        
        .category-budget {
            background: hsl(var(--secondary));
            color: hsl(var(--foreground));
            border: 1px solid hsl(var(--border));
        }
        
        .category-free {
            background: hsl(var(--muted));
            color: hsl(var(--text-muted));
            border: 1px solid hsl(var(--border));
        }
        
        .category-planning {
            background: hsl(var(--card));
            color: hsl(var(--foreground));
            border: 1px solid hsl(var(--border));
        }
        
        .category-avoid {
            background: hsl(var(--destructive-foreground));
            color: hsl(var(--destructive));
            border: 1px solid hsl(var(--destructive));
        }
        
        .category-speed {
            background: hsl(var(--accent));
            color: hsl(var(--foreground));
            border: 1px solid hsl(var(--border));
        }
        
        .category-balanced {
            background: hsl(var(--card));
            color: hsl(var(--foreground));
            border: 1px solid hsl(var(--foreground));
        }
        
        .category-reasoning {
            background: hsl(var(--card));
            color: hsl(var(--foreground));
            border: 1px dashed hsl(var(--foreground));
        }
        
        /* ========================================
           STATUS INDICATORS - MONOCHROME
        ======================================== */
        
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: var(--space-1);
            padding: 2px 6px;
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .status-success {
            background: hsl(var(--card));
            color: hsl(var(--foreground));
            border: 1px solid hsl(var(--foreground));
        }
        
        .status-warning {
            background: hsl(var(--card));
            color: hsl(var(--foreground));
            border: 1px solid hsl(var(--foreground));
        }
        
        .status-error {
            background: hsl(var(--destructive-foreground));
            color: hsl(var(--destructive));
            border: 1px solid hsl(var(--destructive));
        }
        
        .status-info {
            background: hsl(var(--card));
            color: hsl(var(--foreground));
            border: 1px solid hsl(var(--border));
        }
        
        /* ========================================
           RESPONSIVE DESIGN
        ======================================== */
        
        @media (max-width: 768px) {
            body {
                padding: var(--space-2);
            }
            
            .grid-2 {
                grid-template-columns: 1fr;
                gap: var(--space-3);
            }
            
            .presets-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .tabs {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .recommendations-sidebar {
                position: static;
                margin-bottom: var(--space-4);
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 1.5rem;
            }
            
            .presets-grid {
                grid-template-columns: 1fr;
            }
            
            .auto-mode-section {
                flex-direction: column;
                gap: var(--space-2);
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Windsurf Model Selector v8.0</h1>
            <p class="subtitle">Smart prompt enhancement for Windsurf IDE - Analyze your task, get optimal model recommendations, and enhance your prompts with AI</p>
        </header>
        
        <!-- Quick Presets Bar -->
        <div class="presets-bar">
            <button class="preset-btn" data-preset="debugging">
                <div class="preset-icon">üêõ</div>
                <div class="preset-name">Debugging</div>
                <div class="preset-desc">Code analysis and bug fixing</div>
            </button>
            <button class="preset-btn" data-preset="development">
                <div class="preset-icon">üíª</div>
                <div class="preset-name">Development</div>
                <div class="preset-desc">General coding tasks</div>
            </button>
            <button class="preset-btn" data-preset="design">
                <div class="preset-icon">üé®</div>
                <div class="preset-name">Design</div>
                <div class="preset-desc">UI/UX and styling</div>
            </button>
            <button class="preset-btn" data-preset="documentation">
                <div class="preset-icon">üìö</div>
                <div class="preset-name">Documentation</div>
                <div class="preset-desc">Writing and docs</div>
            </button>
            <button class="preset-btn" data-preset="planning">
                <div class="preset-icon">üìã</div>
                <div class="preset-name">Planning</div>
                <div class="preset-desc">Architecture and strategy</div>
            </button>
            <button class="preset-btn" data-preset="optimization">
                <div class="preset-icon">‚ö°</div>
                <div class="preset-name">Optimization</div>
                <div class="preset-desc">Performance tuning</div>
            </button>
        </div>

        <div class="grid grid-2">
            <!-- Main Content -->
            <div class="main-content">
                <!-- Task Analysis (no tabs) -->
                <div class="card">
                    <h2>Task Analysis</h2>
                    
                    <!-- Auto Mode Toggle -->
                    <div class="auto-mode-section">
                        <div>
                            <div class="auto-mode-title">ü§ñ Auto-Analysis Mode</div>
                            <div class="auto-mode-desc">AI will analyze your task and recommend the optimal model automatically</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="autoMode" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <!-- Input Section -->
                    <div class="input-section">
                        <label class="input-label" for="taskInput">Describe your task:</label>
                        <textarea id="taskInput" placeholder="Example: I need to debug a React component that's not rendering properly. The component should fetch user data from an API and display it in a table format."></textarea>
                        <div class="input-hint">üí° Be specific about your requirements for better model recommendations</div>
                    </div>

                    <!-- Action Buttons -->
                    <div style="display: flex; gap: var(--space-3); margin-bottom: var(--space-4);">
                        <button class="btn btn-primary btn-full" id="analyzeBtn">
                            üîç Analyze Task
                        </button>
                        <button class="btn btn-secondary" id="clearBtn">
                            Clear
                        </button>
                    </div>

                    <!-- Results Section -->
                    <div id="results" style="display: none;">
                        <h3>üéØ Recommended Model</h3>
                        <div id="recommendation" class="card" style="background: hsl(var(--accent)); border-color: hsl(var(--foreground));">
                            <!-- Results will be populated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <div class="recommendations-sidebar">
                    <div class="sidebar-title">
                        üèÜ Top Models (Dec 2025)
                    </div>
                    <div id="compact-cards">
                        <!-- Recommendations will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // KODEXALABS WINDSURF MODEL SELECTOR v8.0
        // Smart Scoring Engine - December 2025
        // ========================================

        // ========================================
        // MODEL DATABASE - December 2025 Lineup
        // ========================================
        const models = [
            {
                id: "claude-opus-4.5",
                rank: 1,
                name: "Claude Opus 4.5",
                category: "premium",
                context: "200k",
                speed: "Medium",
                cost: "2x credits",
                costTier: 3,
                strengths: [
                    "architecture-planning",
                    "fuzzy-requirements",
                    "cross-repo-strategy",
                    "complex-reasoning",
                    "long-context",
                    "broad-guidance"
                ],
                description: "Most capable model in Windsurf. Best for fuzzy planning, architecture design, and cross-repo strategy. Currently at Sonnet pricing (2x) instead of 20x.",
                docsUrl: "https://docs.windsurf.com/windsurf/models",
                guideUrl: "https://windsurf.com/changelog",
                communityUrl: "https://www.reddit.com/r/windsurf/comments/1p5qcus/claude_opus_45_in_windsurf_for_2x_credits_instead/"
            },
            {
                id: "swe-1.5",
                rank: 2,
                name: "SWE-1.5",
                category: "workhorse",
                context: "128k",
                speed: "Ultra Fast (950 tok/s)",
                cost: "Standard",
                costTier: 2,
                strengths: [
                    "multi-file-refactor",
                    "deep-debugging",
                    "agentic-workflows",
                    "codebase-exploration",
                    "full-stack-apps",
                    "config-editing",
                    "flow-window-speed"
                ],
                description: "Cognition's flagship agentic model. Near Claude 4.5-level performance at 13x the speed. Kubernetes manifest edits in ~5s vs ~20s. Daily driver for Cognition engineers.",
                docsUrl: "https://docs.windsurf.com/windsurf/models",
                guideUrl: "https://cognition.ai/blog/swe-1-5",
                communityUrl: "https://www.reddit.com/r/windsurf/comments/1pcafy4/do_you_choose_opus45_or_swe15_sonnet45/"
            },
            {
                id: "gpt-5.1-codex-max",
                rank: 3,
                name: "GPT-5.1-Codex Max",
                category: "reasoning",
                context: "128k",
                speed: "Variable (Low/Med/High)",
                cost: "Low tier FREE",
                costTier: 2,
                strengths: [
                    "precise-algorithms",
                    "explicit-instructions",
                    "structured-tasks",
                    "reasoning-depth",
                    "code-generation",
                    "tight-scope"
                ],
                description: "OpenAI's agentic coding model with 3 reasoning tiers. Low tier is FREE for paid users (limited time). Best for precise algorithms and tightly scoped tasks with explicit instructions.",
                docsUrl: "https://docs.windsurf.com/windsurf/models",
                guideUrl: "https://windsurf.com/changelog",
                communityUrl: "https://www.reddit.com/r/windsurf/comments/1o9b5b8/gpt5_codex_vs_claude_sonnet_45/"
            },
            {
                id: "claude-3.7-sonnet-thinking",
                rank: 4,
                name: "Claude 3.7 Sonnet (Thinking)",
                category: "planning",
                context: "1M",
                speed: "Medium",
                cost: "1.5x credits",
                costTier: 2,
                strengths: [
                    "deep-reasoning",
                    "complex-tasks",
                    "architecture-planning",
                    "long-context",
                    "step-by-step",
                    "edge-cases"
                ],
                description: "Extended thinking mode for complex large tasks. 1M token context window. Best for deep reasoning, planning complex features, and handling edge cases systematically.",
                docsUrl: "https://docs.windsurf.com/windsurf/models",
                guideUrl: "https://windsurf.com/changelog",
                communityUrl: "https://www.reddit.com/r/windsurf/comments/1le42im/what_are_your_thoughts_on_swe1_for_planning_and/"
            },
            {
                id: "swe-1-lite",
                rank: 5,
                name: "SWE-1-lite",
                category: "free",
                context: "128k",
                speed: "Fast",
                cost: "FREE (unlimited)",
                costTier: 1,
                strengths: [
                    "budget-friendly",
                    "unlimited-use",
                    "general-coding",
                    "quick-tasks",
                    "learning",
                    "prototyping"
                ],
                description: "Replaced Cascade Base with far better quality. Unlimited free use for all plans. Best fallback for cost-sensitive workflows or when credits are low.",
                docsUrl: "https://docs.windsurf.com/windsurf/models",
                guideUrl: "https://windsurf.com/changelog",
                communityUrl: "https://www.reddit.com/r/windsurf/"
            }
        ];

        // ========================================
        // INTENT FEATURE EXTRACTION
        // ========================================
        function analyzeTaskFeatures(task) {
            const t = task.toLowerCase();
            
            // Feature detection with weighted keyword groups
            const features = {
                // Planning & Architecture
                planning: 0,
                architecture: 0,
                fuzzyRequirements: 0,
                crossRepo: 0,
                
                // Debugging & Fixing
                debugging: 0,
                errorFixing: 0,
                
                // Refactoring & Multi-file
                refactoring: 0,
                multiFile: 0,
                largeScope: 0,
                
                // Algorithms & Precision
                algorithmic: 0,
                preciseInstructions: 0,
                tightScope: 0,
                
                // Speed & Cost
                speedPriority: 0,
                costSensitive: 0,
                
                // Complexity
                complexTask: 0,
                simpleTask: 0,
                
                // Context needs
                longContext: 0,
                
                // Agentic workflows
                agenticWorkflow: 0
            };

            // Planning & Architecture keywords
            const planningKeywords = ['plan', 'architect', 'design', 'strategy', 'roadmap', 'structure', 'organize', 'layout', 'blueprint'];
            const architectureKeywords = ['architecture', 'system design', 'microservice', 'monolith', 'database schema', 'api design', 'infrastructure'];
            const fuzzyKeywords = ['not sure', 'maybe', 'could be', 'might', 'explore', 'brainstorm', 'ideas', 'suggestions', 'help me think', 'what if', 'how should'];
            const crossRepoKeywords = ['multiple repo', 'cross-repo', 'monorepo', 'workspace', 'several project', 'different codebases'];

            // Debugging keywords
            const debugKeywords = ['debug', 'bug', 'error', 'fix', 'broken', 'not working', 'crash', 'issue', 'problem', 'failing', 'exception', 'stack trace'];
            const errorKeywords = ['error', 'exception', 'undefined', 'null', 'type error', 'syntax error', 'runtime', 'compile'];

            // Refactoring keywords
            const refactorKeywords = ['refactor', 'restructure', 'reorganize', 'clean up', 'improve code', 'modernize', 'migrate', 'upgrade', 'rewrite'];
            const multiFileKeywords = ['multiple files', 'several files', 'across files', 'many components', 'entire codebase', 'whole project', 'all files'];
            const largeScopeKeywords = ['large', 'big', 'entire', 'whole', 'complete', 'full', 'comprehensive', 'end-to-end', 'full-stack'];

            // Algorithm keywords
            const algorithmKeywords = ['algorithm', 'optimize', 'performance', 'complexity', 'efficient', 'data structure', 'sort', 'search', 'graph', 'tree', 'dynamic programming'];
            const preciseKeywords = ['exactly', 'precisely', 'specific', 'strict', 'must', 'requirement', 'specification', 'follow this', 'according to'];
            const tightScopeKeywords = ['single file', 'one function', 'this method', 'just this', 'only', 'small change', 'quick fix'];

            // Speed & Cost keywords
            const speedKeywords = ['fast', 'quick', 'rapid', 'immediately', 'asap', 'urgent', 'speed'];
            const costKeywords = ['budget', 'cheap', 'free', 'save credits', 'cost', 'economical', 'affordable', 'credits'];

            // Complexity keywords
            const complexKeywords = ['complex', 'complicated', 'intricate', 'advanced', 'sophisticated', 'challenging', 'difficult'];
            const simpleKeywords = ['simple', 'basic', 'easy', 'straightforward', 'trivial', 'quick'];

            // Long context keywords
            const longContextKeywords = ['long file', 'large file', 'entire codebase', 'huge codebase', 'massive codebase', 'large codebase', 'many files', 'documentation', 'analyze all', 'whole codebase'];

            // Agentic workflow keywords
            const agenticKeywords = ['automate', 'workflow', 'pipeline', 'continuous', 'agent', 'autonomous', 'multi-step', 'chain'];

            // Score each feature category
            const scoreKeywords = (keywords, weight = 1) => {
                return keywords.filter(kw => t.includes(kw)).length * weight;
            };

            features.planning = scoreKeywords(planningKeywords, 2);
            features.architecture = scoreKeywords(architectureKeywords, 3);
            features.fuzzyRequirements = scoreKeywords(fuzzyKeywords, 2);
            features.crossRepo = scoreKeywords(crossRepoKeywords, 3);
            
            features.debugging = scoreKeywords(debugKeywords, 2);
            features.errorFixing = scoreKeywords(errorKeywords, 2);
            
            features.refactoring = scoreKeywords(refactorKeywords, 2);
            features.multiFile = scoreKeywords(multiFileKeywords, 3);
            features.largeScope = scoreKeywords(largeScopeKeywords, 2);
            
            features.algorithmic = scoreKeywords(algorithmKeywords, 3);
            features.preciseInstructions = scoreKeywords(preciseKeywords, 2);
            features.tightScope = scoreKeywords(tightScopeKeywords, 2);
            
            features.speedPriority = scoreKeywords(speedKeywords, 2);
            features.costSensitive = scoreKeywords(costKeywords, 3);
            
            features.complexTask = scoreKeywords(complexKeywords, 2);
            features.simpleTask = scoreKeywords(simpleKeywords, 1);
            
            features.longContext = scoreKeywords(longContextKeywords, 2);
            features.agenticWorkflow = scoreKeywords(agenticKeywords, 2);

            // Derive composite scores
            features.needsPlanning = features.planning + features.architecture + features.fuzzyRequirements + features.crossRepo;
            features.needsDebugging = features.debugging + features.errorFixing;
            features.needsRefactoring = features.refactoring + features.multiFile + features.largeScope + features.agenticWorkflow;
            features.needsPrecision = features.algorithmic + features.preciseInstructions + features.tightScope;
            features.needsBudget = features.costSensitive + features.simpleTask;

            return features;
        }

        // ========================================
        // MODEL SCORING ENGINE
        // ========================================
        function scoreModelForTask(model, features) {
            let score = 0;
            const strengths = model.strengths;

            // Claude Opus 4.5 scoring - best for planning & fuzzy requirements
            if (model.id === 'claude-opus-4.5') {
                score += features.needsPlanning * 5;
                score += features.fuzzyRequirements * 6;
                score += features.architecture * 5;
                score += features.crossRepo * 6;
                score += features.complexTask * 3;
                score += features.longContext * 3;
                // Penalty for simple/budget tasks
                score -= features.simpleTask * 2;
                score -= features.costSensitive * 3;
                score -= features.speedPriority * 2;
            }

            // SWE-1.5 scoring - best for debugging, refactoring, agentic workflows
            if (model.id === 'swe-1.5') {
                score += features.needsDebugging * 6;
                score += features.needsRefactoring * 6;
                score += features.multiFile * 5;
                score += features.agenticWorkflow * 6;
                score += features.largeScope * 4;
                score += features.speedPriority * 4; // Ultra fast!
                // Good general-purpose score
                score += 5; // Base bonus as daily driver
            }

            // GPT-5.1-Codex Max scoring - best for precise algorithms
            if (model.id === 'gpt-5.1-codex-max') {
                score += features.needsPrecision * 6;
                score += features.algorithmic * 5;
                score += features.preciseInstructions * 5;
                score += features.tightScope * 4;
                // Good for structured tasks
                score += features.complexTask * 2;
                // Free tier bonus for cost-sensitive
                score += features.costSensitive * 2;
            }

            // Claude 3.7 Sonnet (Thinking) scoring - deep reasoning
            if (model.id === 'claude-3.7-sonnet-thinking') {
                score += features.complexTask * 5;
                score += features.needsPlanning * 4;
                score += features.longContext * 5;
                score += features.architecture * 3;
                // Good for step-by-step reasoning
                score += features.needsPrecision * 2;
            }

            // SWE-1-lite scoring - budget fallback
            if (model.id === 'swe-1-lite') {
                score += features.needsBudget * 8;
                score += features.costSensitive * 6;
                score += features.simpleTask * 4;
                // Always viable as fallback
                score += 2;
            }

            // Cost tier adjustment
            if (features.costSensitive > 0) {
                score -= (model.costTier - 1) * 3;
            }

            return Math.max(0, score);
        }

        // ========================================
        // RANKED MODEL SELECTION
        // ========================================
        function getRankedModelsForTask(task) {
            const features = analyzeTaskFeatures(task);
            
            // Score all models
            const scoredModels = models.map(model => ({
                model: model,
                score: scoreModelForTask(model, features),
                features: features
            }));

            // Sort by score descending
            scoredModels.sort((a, b) => b.score - a.score);

            // Generate reasoning for primary choice
            const primary = scoredModels[0];
            const reasoning = generateReasoning(primary.model, features);

            return {
                primary: primary.model,
                fallbackB: scoredModels[1]?.model || null,
                fallbackC: scoredModels.find(s => s.model.costTier === 1)?.model || scoredModels[scoredModels.length - 1]?.model,
                reasoning: reasoning,
                features: features,
                allScored: scoredModels
            };
        }

        // ========================================
        // REASONING GENERATOR
        // ========================================
        function generateReasoning(model, features) {
            const reasons = [];

            if (model.id === 'claude-opus-4.5') {
                if (features.fuzzyRequirements > 0) reasons.push("fuzzy/exploratory requirements");
                if (features.architecture > 0) reasons.push("architecture design");
                if (features.crossRepo > 0) reasons.push("cross-repo strategy");
                if (features.needsPlanning > 0) reasons.push("planning and broad guidance");
            }

            if (model.id === 'swe-1.5') {
                if (features.needsDebugging > 0) reasons.push("deep debugging");
                if (features.needsRefactoring > 0) reasons.push("multi-file refactoring");
                if (features.agenticWorkflow > 0) reasons.push("agentic workflow");
                if (features.speedPriority > 0) reasons.push("speed priority (950 tok/s)");
                if (reasons.length === 0) reasons.push("general coding (daily driver)");
            }

            if (model.id === 'gpt-5.1-codex-max') {
                if (features.algorithmic > 0) reasons.push("algorithmic precision");
                if (features.preciseInstructions > 0) reasons.push("explicit structured instructions");
                if (features.tightScope > 0) reasons.push("tightly scoped task");
            }

            if (model.id === 'claude-3.7-sonnet-thinking') {
                if (features.complexTask > 0) reasons.push("complex reasoning required");
                if (features.longContext > 0) reasons.push("long context (1M tokens)");
                if (features.needsPlanning > 0) reasons.push("step-by-step planning");
            }

            if (model.id === 'swe-1-lite') {
                if (features.costSensitive > 0) reasons.push("cost-sensitive (FREE unlimited)");
                if (features.simpleTask > 0) reasons.push("simple/quick task");
                reasons.push("budget-friendly fallback");
            }

            return reasons.length > 0 
                ? `Recommended because your task involves ${reasons.slice(0, 3).join(', ')}.`
                : `Recommended as a strong general-purpose choice for this task.`;
        }

        // ========================================
        // LEGACY WRAPPER (for compatibility)
        // ========================================
        function analyzeTask(task) {
            const result = getRankedModelsForTask(task);
            // Return primary model for backward compatibility
            return result.primary;
        }

        // ========================================
        // ENHANCED RECOMMENDATION DISPLAY
        // ========================================
        function showRecommendationWithFallbacks(task) {
            const result = getRankedModelsForTask(task);
            const { primary, fallbackB, fallbackC, reasoning } = result;
            
            const results = document.getElementById('results');
            const recommendation = document.getElementById('recommendation');

            // Build external links HTML
            const buildLinks = (model) => {
                let links = '';
                if (model.docsUrl) {
                    links += `<a href="${model.docsUrl}" target="_blank" rel="noopener" style="font-size: 0.75rem; color: hsl(var(--text-muted)); text-decoration: underline; margin-right: var(--space-2);">üìÑ Docs</a>`;
                }
                if (model.guideUrl) {
                    links += `<a href="${model.guideUrl}" target="_blank" rel="noopener" style="font-size: 0.75rem; color: hsl(var(--text-muted)); text-decoration: underline; margin-right: var(--space-2);">üìñ Guide</a>`;
                }
                if (model.communityUrl) {
                    links += `<a href="${model.communityUrl}" target="_blank" rel="noopener" style="font-size: 0.75rem; color: hsl(var(--text-muted)); text-decoration: underline;">üí¨ Reddit</a>`;
                }
                return links;
            };

            // Build fallback card HTML
            const buildFallbackCard = (model, label) => {
                if (!model) return '';
                return `
                    <div style="background: hsl(var(--secondary)); border: 1px solid hsl(var(--border)); border-radius: var(--radius-md); padding: var(--space-3); cursor: pointer;" onclick="showModelDetails(models.find(m => m.id === '${model.id}'))">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-1);">
                            <span style="font-size: 0.7rem; color: hsl(var(--text-muted)); text-transform: uppercase; letter-spacing: 0.05em;">${label}</span>
                            <span style="font-size: 0.75rem; color: hsl(var(--text-secondary));">${model.cost}</span>
                        </div>
                        <div style="font-weight: 600; color: hsl(var(--foreground)); font-size: 0.9rem;">${model.name}</div>
                        <div style="font-size: 0.75rem; color: hsl(var(--text-secondary)); margin-top: var(--space-1);">${model.speed}</div>
                    </div>
                `;
            };

            recommendation.innerHTML = `
                <!-- Primary Recommendation -->
                <div style="margin-bottom: var(--space-4);">
                    <div style="display: flex; align-items: center; gap: var(--space-3); margin-bottom: var(--space-2);">
                        <div style="font-size: 1.5rem; font-weight: 800; color: hsl(var(--foreground)); background: hsl(var(--secondary)); width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: var(--radius-md); border: 2px solid hsl(var(--foreground));">A</div>
                        <div>
                            <h3 style="margin-bottom: var(--space-1); font-size: 1.1rem;">${primary.name}</h3>
                            <span class="category-indicator category-${primary.category}">${primary.category}</span>
                        </div>
                    </div>
                    
                    <!-- Reasoning -->
                    <p style="margin-bottom: var(--space-3); color: hsl(var(--text-secondary)); font-size: 0.9rem; font-style: italic; border-left: 2px solid hsl(var(--border)); padding-left: var(--space-3);">
                        üí° ${reasoning}
                    </p>
                    
                    <p style="margin-bottom: var(--space-3); color: hsl(var(--text-secondary)); font-size: 0.85rem;">${primary.description}</p>
                    
                    <!-- Specs Grid -->
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-2); margin-bottom: var(--space-3);">
                        <div style="text-align: center; padding: var(--space-2); background: hsl(var(--secondary)); border-radius: var(--radius-md);">
                            <div style="font-size: 0.75rem; color: hsl(var(--text-muted));">Context</div>
                            <div style="font-weight: 600; color: hsl(var(--foreground)); font-size: 0.9rem;">${primary.context}</div>
                        </div>
                        <div style="text-align: center; padding: var(--space-2); background: hsl(var(--secondary)); border-radius: var(--radius-md);">
                            <div style="font-size: 0.75rem; color: hsl(var(--text-muted));">Speed</div>
                            <div style="font-weight: 600; color: hsl(var(--foreground)); font-size: 0.9rem;">${primary.speed}</div>
                        </div>
                        <div style="text-align: center; padding: var(--space-2); background: hsl(var(--secondary)); border-radius: var(--radius-md);">
                            <div style="font-size: 0.75rem; color: hsl(var(--text-muted));">Cost</div>
                            <div style="font-weight: 600; color: hsl(var(--foreground)); font-size: 0.9rem;">${primary.cost}</div>
                        </div>
                    </div>
                    
                    <!-- Strengths -->
                    <div style="margin-bottom: var(--space-3);">
                        <div style="font-size: 0.85rem; font-weight: 600; margin-bottom: var(--space-2); color: hsl(var(--foreground));">Strengths:</div>
                        <div style="display: flex; flex-wrap: wrap; gap: var(--space-1);">
                            ${primary.strengths.slice(0, 5).map(strength => `
                                <span class="status-indicator status-success" style="font-size: 0.7rem;">${strength.replace(/-/g, ' ')}</span>
                            `).join('')}
                        </div>
                    </div>
                    
                    <!-- External Links -->
                    <div style="margin-bottom: var(--space-3);">
                        ${buildLinks(primary)}
                    </div>
                    
                    <button class="btn btn-primary btn-full" onclick="selectModel('${primary.name}')">
                        Select ${primary.name}
                    </button>
                </div>
                
                <!-- Fallback Options -->
                <div style="border-top: 1px solid hsl(var(--border)); padding-top: var(--space-3);">
                    <div style="font-size: 0.8rem; font-weight: 600; color: hsl(var(--text-muted)); margin-bottom: var(--space-2); text-transform: uppercase; letter-spacing: 0.05em;">Alternative Options</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-2);">
                        ${buildFallbackCard(fallbackB, 'Fallback B')}
                        ${buildFallbackCard(fallbackC, 'Budget C')}
                    </div>
                </div>
            `;
            
            results.style.display = 'block';
        }

        // ========================================
        // LEGACY showRecommendation (for sidebar clicks)
        // ========================================
        function showRecommendation(model) {
            const results = document.getElementById('results');
            const recommendation = document.getElementById('recommendation');
            
            // Build external links HTML
            const buildLinks = (m) => {
                let links = '';
                if (m.docsUrl) {
                    links += `<a href="${m.docsUrl}" target="_blank" rel="noopener" style="font-size: 0.75rem; color: hsl(var(--text-muted)); text-decoration: underline; margin-right: var(--space-2);">üìÑ Docs</a>`;
                }
                if (m.guideUrl) {
                    links += `<a href="${m.guideUrl}" target="_blank" rel="noopener" style="font-size: 0.75rem; color: hsl(var(--text-muted)); text-decoration: underline; margin-right: var(--space-2);">üìñ Guide</a>`;
                }
                if (m.communityUrl) {
                    links += `<a href="${m.communityUrl}" target="_blank" rel="noopener" style="font-size: 0.75rem; color: hsl(var(--text-muted)); text-decoration: underline;">üí¨ Reddit</a>`;
                }
                return links;
            };
            
            recommendation.innerHTML = `
                <div style="display: flex; align-items: center; gap: var(--space-3); margin-bottom: var(--space-3);">
                    <div style="font-size: 2rem; font-weight: 800; color: hsl(var(--foreground));">${model.rank}</div>
                    <div>
                        <h3 style="margin-bottom: var(--space-1);">${model.name}</h3>
                        <span class="category-indicator category-${model.category}">${model.category}</span>
                    </div>
                </div>
                <p style="margin-bottom: var(--space-3); color: hsl(var(--text-secondary));">${model.description}</p>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-2); margin-bottom: var(--space-3);">
                    <div style="text-align: center; padding: var(--space-2); background: hsl(var(--secondary)); border-radius: var(--radius-md);">
                        <div style="font-size: 0.8rem; color: hsl(var(--text-muted));">Context</div>
                        <div style="font-weight: 600; color: hsl(var(--foreground));">${model.context}</div>
                    </div>
                    <div style="text-align: center; padding: var(--space-2); background: hsl(var(--secondary)); border-radius: var(--radius-md);">
                        <div style="font-size: 0.8rem; color: hsl(var(--text-muted));">Speed</div>
                        <div style="font-weight: 600; color: hsl(var(--foreground));">${model.speed}</div>
                    </div>
                    <div style="text-align: center; padding: var(--space-2); background: hsl(var(--secondary)); border-radius: var(--radius-md);">
                        <div style="font-size: 0.8rem; color: hsl(var(--text-muted));">Cost</div>
                        <div style="font-weight: 600; color: hsl(var(--foreground));">${model.cost}</div>
                    </div>
                </div>
                <div style="margin-bottom: var(--space-3);">
                    <div style="font-size: 0.9rem; font-weight: 600; margin-bottom: var(--space-2); color: hsl(var(--foreground));">Strengths:</div>
                    <div style="display: flex; flex-wrap: wrap; gap: var(--space-2);">
                        ${model.strengths.map(strength => `
                            <span class="status-indicator status-success">${strength.replace(/-/g, ' ')}</span>
                        `).join('')}
                    </div>
                </div>
                <div style="margin-bottom: var(--space-3);">
                    ${buildLinks(model)}
                </div>
                <button class="btn btn-primary btn-full" onclick="selectModel('${model.name}')">
                    Select This Model
                </button>
            `;
            
            results.style.display = 'block';
        }

        // ========================================
        // INITIALIZATION
        // ========================================
        document.addEventListener('DOMContentLoaded', function() {
            initializePresets();
            populateRecommendations();
            initializeAnalyzer();
        });

        // Preset functionality
        function initializePresets() {
            const presetBtns = document.querySelectorAll('.preset-btn');
            
            presetBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const preset = btn.dataset.preset;
                    
                    presetBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    const taskInput = document.getElementById('taskInput');
                    const presetTexts = {
                        debugging: "I need to debug a complex issue across multiple files. There's an error in my application that involves async state management and I can't figure out the root cause.",
                        development: "I need help building a full-stack feature with React frontend and Node.js backend. This involves creating new API endpoints and UI components.",
                        design: "I need help with UI/UX design. I want to improve the user interface with better component architecture and styling patterns.",
                        documentation: "I need to write comprehensive documentation for our API. Please help me create clear and thorough docs with examples.",
                        planning: "I need to plan and architect a new microservices system. Help me design the overall structure, data flow, and service boundaries.",
                        optimization: "I need to optimize performance across our codebase. Help me identify bottlenecks and implement efficient algorithms."
                    };
                    
                    taskInput.value = presetTexts[preset] || '';
                });
            });
        }

        // Populate recommendations sidebar
        function populateRecommendations() {
            const container = document.getElementById('compact-cards');
            
            models.forEach(model => {
                const card = document.createElement('div');
                card.className = 'compact-card';
                card.innerHTML = `
                    <div class="compact-header">
                        <div class="compact-rank">${model.rank}</div>
                        <div class="compact-name">${model.name}</div>
                    </div>
                    <div class="compact-category category-${model.category}">${model.category}</div>
                    <div class="compact-specs">
                        <div class="compact-spec">
                            <strong>Context:</strong> ${model.context}
                        </div>
                        <div class="compact-spec">
                            <strong>Speed:</strong> ${model.speed}
                        </div>
                        <div class="compact-spec">
                            <strong>Cost:</strong> ${model.cost}
                        </div>
                    </div>
                `;
                
                card.addEventListener('click', () => {
                    showModelDetails(model);
                });
                
                container.appendChild(card);
            });
        }

        // Initialize analyzer with smart scoring
        function initializeAnalyzer() {
            const analyzeBtn = document.getElementById('analyzeBtn');
            const clearBtn = document.getElementById('clearBtn');
            const taskInput = document.getElementById('taskInput');
            const results = document.getElementById('results');

            analyzeBtn.addEventListener('click', () => {
                const task = taskInput.value.trim();
                
                if (!task) {
                    alert('Please describe your task first.');
                    return;
                }

                analyzeBtn.textContent = 'üîÑ Analyzing...';
                analyzeBtn.disabled = true;

                setTimeout(() => {
                    // Use enhanced recommendation with fallbacks
                    showRecommendationWithFallbacks(task);
                    
                    analyzeBtn.textContent = 'üîç Analyze Task';
                    analyzeBtn.disabled = false;
                }, 800);
            });

            clearBtn.addEventListener('click', () => {
                taskInput.value = '';
                results.style.display = 'none';
            });
        }

        // Show model details (from sidebar click)
        function showModelDetails(model) {
            showRecommendation(model);
            
            const taskInput = document.getElementById('taskInput');
            taskInput.value = `I need help with a task that would benefit from ${model.name}'s capabilities: ${model.description.toLowerCase()}`;
        }

        // Select model
        function selectModel(modelName) {
            alert(`Model "${modelName}" has been selected for your Windsurf IDE session.\n\nIn the actual Windsurf IDE, this would switch your active model.`);
        }
    </script>
</body>
</html>
